{"version":3,"sources":["webpack:///./src/components/AdminKitBuilder/Create.vue?5522","webpack:///src/components/AdminKitBuilder/Create.vue","webpack:///./src/components/AdminKitBuilder/Create.vue?9fb0","webpack:///./src/components/AdminKitBuilder/Create.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","on","onResolve","onReject","akb_load_kit_relation_all_loaded","formValid","side","akb_load_kit_relation","on_data_transfer","_e","staticStyle","flip_side","_v","save_data","staticRenderFns","components","ChooseSkelet","ChooseProduct","data","list_selected_attach","front","back","destroyed","$store","dispatch","methods","isValid","parseInt","skeleton_id","console","error","$set","saved_data","push","computed","akb_create_kit","getters","component","VBtn","VCol","VContent","VDivider","VRow"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,YAAY,CAACA,EAAG,eAAe,CAACE,MAAM,CAAC,QAAS,GAAOC,GAAG,CAAC,QAAUP,EAAIQ,UAAU,OAASR,EAAIS,YAAYL,EAAG,aAAcJ,EAAIU,kCAAoCV,EAAIW,UAAWP,EAAG,gBAAgB,CAACE,MAAM,CAAC,KAAON,EAAIY,KAAK,sBAAwBZ,EAAIa,uBAAuBN,GAAG,CAAC,cAAgBP,EAAIc,oBAAoBd,EAAIe,KAAKX,EAAG,aAAcJ,EAAIU,kCAAoCV,EAAIW,UAAWP,EAAG,QAAQ,CAACA,EAAG,QAAQ,CAACE,MAAM,CAAC,KAAO,MAAM,CAACF,EAAG,QAAQ,CAACY,YAAY,CAAC,MAAQ,QAAQV,MAAM,CAAC,MAAQ,OAAO,MAAQ,IAAIC,GAAG,CAAC,MAAQP,EAAIiB,YAAY,CAACjB,EAAIkB,GAAG,gBAAgB,GAAGd,EAAG,QAAQ,CAACE,MAAM,CAAC,KAAO,MAAM,CAACF,EAAG,QAAQ,CAACY,YAAY,CAAC,MAAQ,QAAQV,MAAM,CAAC,MAAQ,UAAU,MAAQ,IAAIC,GAAG,CAAC,MAAQP,EAAImB,YAAY,CAACnB,EAAIkB,GAAG,gBAAgB,IAAI,GAAGlB,EAAIe,MAAM,IACj1BK,EAAkB,G,oCCgCtB,GACEC,WAAY,CACVC,aAAJ,OACIC,cAAJ,QAEEC,KALF,WAMI,MAAO,CACLb,WAAW,EACXc,qBAAsB,CACpBC,MAAO,GACPC,KAAM,IAERf,KAAM,UAGVgB,UAfF,WAgBI3B,KAAK4B,OAAOC,SAAS,sBAEvBC,QAAS,CAEPvB,UAFJ,YAEA,yBACMP,KAAKU,UAAYqB,EAGjB/B,KAAK4B,OAAOC,SAAS,wBAAyBG,SAAST,EAAKU,mBAGlE,2BACQjC,KAAK4B,OAAOC,SAAS,iBAAkBN,GAEvCvB,KAAK4B,OAAOC,SAAS,iBAAkB,OAA/C,OAA+C,CAA/C,iCAIIrB,SAhBJ,YAgBA,gBACMR,KAAKU,UAAYqB,GAGnBf,UApBJ,WAqBA,oBACQhB,KAAKW,KAAO,OACpB,mBACQX,KAAKW,KAAO,QAEZuB,QAAQC,MAAM,sBAKlBtB,iBA/BJ,SA+BA,GACMb,KAAKoC,KAAKpC,KAAKwB,qBAAsB,QAASD,EAAKE,OACnDzB,KAAKoC,KAAKpC,KAAKwB,qBAAsB,OAAQD,EAAKG,OAEpDR,UAnCJ,WAqCM,IADA,IAAN,KACA,iDACQmB,EAAWC,KACnB,CACU,WAAV,wDACU,iBAAV,8DACU,yBAAV,yIACU,wBAAV,uIACU,OAAV,mCAIM,IAAN,oDACQD,EAAWC,KACnB,CACU,WAAV,uDACU,iBAAV,6DACU,yBAAV,uIACU,wBAAV,qIACU,OAAV,mCAIMtC,KAAK4B,OAAOC,SAAS,wBAAyBQ,KAGlDE,SAAU,CAERC,eAFJ,WAGM,OAAOxC,KAAK4B,OAAOa,QAAQD,gBAG7B5B,sBANJ,WAOM,OAAOZ,KAAK4B,OAAOa,QAAQ7B,uBAG7BH,iCAVJ,WAWM,OAAOT,KAAK4B,OAAOa,QAAQhC,oCC5H4X,I,6FCOzZiC,EAAY,eACd,EACA5C,EACAqB,GACA,EACA,KACA,KACA,MAIa,aAAAuB,EAAiB,QAShC,IAAkBA,EAAW,CAACC,OAAA,KAAKC,OAAA,KAAKC,WAAA,KAASC,WAAA,KAASC,OAAA","file":"js/chunk-2d0e9ac7.259af02a.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-content',[_c('ChooseSkelet',{attrs:{\"update\":false},on:{\"resolve\":_vm.onResolve,\"reject\":_vm.onReject}}),_c('v-divider'),(_vm.akb_load_kit_relation_all_loaded && _vm.formValid)?_c('ChooseProduct',{attrs:{\"side\":_vm.side,\"akb_load_kit_relation\":_vm.akb_load_kit_relation},on:{\"data_transfer\":_vm.on_data_transfer}}):_vm._e(),_c('v-divider'),(_vm.akb_load_kit_relation_all_loaded && _vm.formValid)?_c('v-row',[_c('v-col',{attrs:{\"cols\":\"6\"}},[_c('v-btn',{staticStyle:{\"color\":\"#fff\"},attrs:{\"color\":\"blue\",\"block\":\"\"},on:{\"click\":_vm.flip_side}},[_vm._v(\"Flip side\")])],1),_c('v-col',{attrs:{\"cols\":\"6\"}},[_c('v-btn',{staticStyle:{\"color\":\"#fff\"},attrs:{\"color\":\"primary\",\"block\":\"\"},on:{\"click\":_vm.save_data}},[_vm._v(\"Save data\")])],1)],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <v-content>\r\n    <ChooseSkelet \r\n      @resolve=\"onResolve\" \r\n      :update=\"false\" \r\n      @reject=\"onReject\"\r\n    ></ChooseSkelet>\r\n\r\n    <v-divider></v-divider>\r\n\r\n    <ChooseProduct \r\n      v-if=\"akb_load_kit_relation_all_loaded && formValid\" \r\n      :side=\"side\" \r\n      :akb_load_kit_relation=\"akb_load_kit_relation\"\r\n      @data_transfer=\"on_data_transfer\"\r\n    ></ChooseProduct>\r\n\r\n    <v-divider></v-divider>\r\n  \r\n    <v-row v-if=\"akb_load_kit_relation_all_loaded && formValid\">\r\n      <v-col cols=\"6\">\r\n        <v-btn color=\"blue\" style=\"color:#fff;\" block @click=\"flip_side\">Flip side</v-btn>\r\n      </v-col>\r\n      <v-col cols=\"6\">\r\n        <v-btn color=\"primary\" style=\"color:#fff;\" block @click=\"save_data\">Save data</v-btn>\r\n      </v-col>\r\n    </v-row>\r\n  </v-content>\r\n</template>\r\n\r\n<script>\r\nimport ChooseSkelet from \"@/components/AdminKitBuilder/help/ChooseSkelet.vue\";\r\nimport ChooseProduct from \"@/components/AdminKitBuilder/help/ChooseProduct.vue\";\r\nexport default {\r\n  components: {\r\n    ChooseSkelet,\r\n    ChooseProduct\r\n  },\r\n  data() {\r\n    return {\r\n      formValid: false,\r\n      list_selected_attach: {\r\n        front: [],\r\n        back: []\r\n      },\r\n      side: 'front'\r\n    };\r\n  },\r\n  destroyed() {\r\n    this.$store.dispatch('akb_drop_all_data')\r\n  },\r\n  methods: {\r\n    // Обработка коректного ответа\r\n    onResolve({ isValid, data }) {\r\n      this.formValid = isValid;\r\n      \r\n      // Загружаем данныех всех связей со скелетом\r\n      this.$store.dispatch('akb_load_kit_relation', parseInt(data.skeleton_id))\r\n\r\n      // Создаем базу\r\n      if(this.akb_create_kit.id === undefined){\r\n        this.$store.dispatch('akb_create_kit', data)\r\n      }else {\r\n        this.$store.dispatch('akb_update_kit', {id:this.akb_create_kit.id, ...data})\r\n      }\r\n    },\r\n    //  Обработка ошибачного ответа\r\n    onReject({ isValid }) {\r\n      this.formValid = isValid;\r\n    },\r\n    // переворот сторон\r\n    flip_side(){\r\n      if(this.side === 'front'){\r\n        this.side = 'back'\r\n      }else if (this.side === 'back'){\r\n        this.side = 'front'\r\n      }else {\r\n        console.error('Has error in side')\r\n      }\r\n      \r\n    },\r\n    // Прием данных\r\n    on_data_transfer(data){\r\n      this.$set(this.list_selected_attach, 'front', data.front)\r\n      this.$set(this.list_selected_attach, 'back', data.back)\r\n    },\r\n    save_data(){\r\n      let saved_data = []\r\n      for(let i = 0; i < this.list_selected_attach.front.length; i++){\r\n        saved_data.push(\r\n          {\r\n            product_id: parseInt(this.list_selected_attach.front[i].product_id),\r\n            product_point_id: parseInt(this.list_selected_attach.front[i].product_point_id),\r\n            parent_skeleton_point_id: this.list_selected_attach.front[i].parent_skeleton_point_id ? parseInt(this.list_selected_attach.front[i].parent_skeleton_point_id) : undefined,\r\n            parent_product_point_id: this.list_selected_attach.front[i].parent_product_point_id ? parseInt(this.list_selected_attach.front[i].parent_product_point_id) : undefined,\r\n            kit_id: parseInt(this.akb_create_kit.id)\r\n          }\r\n        )\r\n      }\r\n      for(let j = 0; j < this.list_selected_attach.back.length; j++){\r\n        saved_data.push(\r\n          {\r\n            product_id: parseInt(this.list_selected_attach.back[j].product_id),\r\n            product_point_id: parseInt(this.list_selected_attach.back[j].product_point_id),\r\n            parent_skeleton_point_id: this.list_selected_attach.back[j].parent_skeleton_point_id ? parseInt(this.list_selected_attach.back[j].parent_skeleton_point_id) : undefined,\r\n            parent_product_point_id: this.list_selected_attach.back[j].parent_product_point_id ? parseInt(this.list_selected_attach.back[j].parent_product_point_id) : undefined,\r\n            kit_id: parseInt(this.akb_create_kit.id)\r\n          }\r\n        )\r\n      }\r\n      this.$store.dispatch('akb_save_kit_products', saved_data)\r\n    }\r\n  },\r\n  computed: {\r\n    // получаем данные с сервера после создания кита\r\n    akb_create_kit(){\r\n      return this.$store.getters.akb_create_kit\r\n    },\r\n    // загружаем все связи кита\r\n    akb_load_kit_relation(){\r\n      return this.$store.getters.akb_load_kit_relation\r\n    },\r\n    // статус загрузки связей кита\r\n    akb_load_kit_relation_all_loaded(){\r\n      return this.$store.getters.akb_load_kit_relation_all_loaded\r\n    },\r\n  }\r\n};\r\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Create.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Create.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Create.vue?vue&type=template&id=2b19acd0&\"\nimport script from \"./Create.vue?vue&type=script&lang=js&\"\nexport * from \"./Create.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContent } from 'vuetify/lib/components/VContent';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VRow } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VBtn,VCol,VContent,VDivider,VRow})\n"],"sourceRoot":""}