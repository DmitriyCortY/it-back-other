(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-10e0569d"],{2454:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-content",[s("ChooseSkelet",{attrs:{update:!1,bb_base_relations:t.bb_base_relations},on:{resolve:t.onResolve,reject:t.onReject}}),s("v-divider"),s("br"),t.formValid?s("div",[t.bb_load_base_relations_status?s("Conf",{attrs:{skeleton_data:t.bb_base_relations.skeleton_data,attachments:t.list_selected_attach,config:t.bb_base_relations,side:t.side}}):t._e(),t.merge_classes.length>0?s("v-row",t._l(t.merge_classes,(function(e,a){return s("v-col",{key:"c-up"+a,attrs:{cols:"12",md:"3",sm:"6"}},[s("v-card",{staticClass:"pa-2",on:{click:function(s){return t.select_category(e)}}},[t._v(" "+t._s(e.name)+" ")])],1)})),1):t._e(),s("v-row",t._l(t.suitable_attachment,(function(e,a){return s("v-col",{key:"up"+a,attrs:{cols:"4"}},[s("v-card",{staticClass:"pa-2"},[s("v-row",{attrs:{align:"center",justify:"center"}},[s("v-col",{attrs:{cols:"8"}},[s("h5",{staticStyle:{"text-transform":"uppercase"}},[t._v(t._s(t.get_part_name_img(e).name))])]),s("v-col",{attrs:{cols:"4"}},[s("img",{staticStyle:{"max-width":"80px","max-height":"80px",display:"block",margin:"auto"},attrs:{src:t.get_part_name_img(e).img}})]),t.detect_selected_attach(e)?t._e():s("v-btn",{staticStyle:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%"},attrs:{color:"primary",text:""},on:{click:function(s){return t.validation_selected_item(e)}}},[s("v-icon",[t._v(" mdi-plus-circle-outline ")])],1),t.detect_selected_attach(e)?s("v-btn",{staticStyle:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%"},attrs:{color:"red",text:""},on:{click:function(s){return t.delete_of_the_selected_list(e)}}},[s("v-icon",[t._v(" mdi-minus-circle-outline ")])],1):t._e()],1)],1)],1)})),1),s("v-row",{attrs:{justify:"end"}},[s("v-col",{attrs:{cols:"6"}},[s("v-btn",{attrs:{block:"",color:"primary"},on:{click:t.flip_side}},[t._v("Flip side")])],1),s("v-col",{attrs:{cols:"6"}},[s("v-btn",{attrs:{block:"",color:"primary"},on:{click:t.save_base_builder_data}},[t._v("Save Base Builder Data")])],1)],1),s("v-dialog",{attrs:{persistent:"",width:"560"},model:{value:t.select_skeleton_point_dialog,callback:function(e){t.select_skeleton_point_dialog=e},expression:"select_skeleton_point_dialog"}},[s("v-card",[s("v-card-title",{staticClass:"grey lighten-2",attrs:{"primary-title":""}},[t._v("Need select a point on the skeleton")]),s("v-divider"),s("v-card-text",[s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("v-select",{attrs:{items:t.list_for_select_skeleton_point,"item-text":"skeleton_point_name","item-value":"skeleton_point_id","error-messages":t.selected_point_error,required:""},on:{input:function(e){return t.$v.selected_point.$touch()},blur:function(e){return t.$v.selected_point.$touch()}},model:{value:t.selected_point,callback:function(e){t.selected_point=e},expression:"selected_point"}})],1)],1),s("v-row",[s("v-col",{attrs:{cols:"6"}},[s("v-btn",{attrs:{color:"danger",block:""},on:{click:t.cancel_form_skeleton}},[t._v("Cancel")])],1),s("v-col",{attrs:{cols:"6"}},[s("v-btn",{attrs:{color:"primary",block:""},on:{click:t.form_valid_skeleton}},[t._v("Select")])],1)],1)],1)],1)],1),s("v-dialog",{attrs:{persistent:"",width:"560"},model:{value:t.select_parent_part_point_dialog,callback:function(e){t.select_parent_part_point_dialog=e},expression:"select_parent_part_point_dialog"}},[s("v-card",[s("v-card-title",{staticClass:"grey lighten-2",attrs:{"primary-title":""}},[t._v("Need select a point on the skeleton")]),s("v-divider"),s("v-card-text",[s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("v-select",{attrs:{items:t.list_for_select_skeleton_point,"item-text":"parent_part_point_name","item-value":"parent_part_point_id","error-messages":t.selected_point_error,required:""},on:{input:function(e){return t.$v.selected_point.$touch()},blur:function(e){return t.$v.selected_point.$touch()}},model:{value:t.selected_point,callback:function(e){t.selected_point=e},expression:"selected_point"}})],1)],1),s("v-row",[s("v-col",{attrs:{cols:"6"}},[s("v-btn",{attrs:{color:"danger",block:""},on:{click:t.cancel_form_parent_part}},[t._v("Cancel")])],1),s("v-col",{attrs:{cols:"6"}},[s("v-btn",{attrs:{color:"primary",block:""},on:{click:t.form_valid_parent_part}},[t._v("Select")])],1)],1)],1)],1)],1),s("v-dialog",{attrs:{persistent:"",width:"560"},model:{value:t.select_parent_part_or_skeleton,callback:function(e){t.select_parent_part_or_skeleton=e},expression:"select_parent_part_or_skeleton"}},[s("v-card",[s("v-card-title",{staticClass:"grey lighten-2",attrs:{"primary-title":""}},[t._v("Need to choose where to wear")]),s("v-divider"),s("v-card-text",[s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("v-select",{attrs:{items:[{name:"Skeleton",value:"skeleton"},{name:"Part",value:"part"}],"item-text":"name","item-value":"value","error-messages":t.part_or_skeleton_error,required:""},on:{input:function(e){return t.$v.part_or_skeleton.$touch()},blur:function(e){return t.$v.part_or_skeleton.$touch()}},model:{value:t.part_or_skeleton,callback:function(e){t.part_or_skeleton=e},expression:"part_or_skeleton"}})],1),s("v-col",{attrs:{cols:"6"}},[s("v-btn",{attrs:{color:"danger",block:""},on:{click:t.cancel_form_part_or_skeleton}},[t._v("Cancel")])],1),s("v-col",{attrs:{cols:"6"}},[s("v-btn",{attrs:{color:"primary",block:""},on:{click:t.form_valid_part_or_skeleton}},[t._v("Select")])],1)],1)],1)],1)],1)],1):t._e()],1)},i=[],n=(s("99af"),s("4de4"),s("a630"),s("caad"),s("d81d"),s("a434"),s("b0c0"),s("d3b7"),s("6062"),s("2532"),s("3ca3"),s("ddb0"),s("5530")),r=s("fcf4"),_=s("8b39"),l=s("b5ae"),o={validations:{selected_point:{required:l["required"]},part_or_skeleton:{required:l["required"]}},components:{ChooseSkelet:r["a"],Conf:_["a"]},data:function(){return{formValid:!1,suitable_attachment:[],list_selected_attach:{front:[],back:[]},select_parent_part_point_dialog:!1,select_skeleton_point_dialog:!1,list_for_select_skeleton_point:[],selected_point_data:null,selected_point:null,side:"front",select_parent_part_or_skeleton:!1,part_or_skeleton:null,intermediate_attach_data:null}},created:function(){},destroyed:function(){this.$store.dispatch("bb_clear_all_data")},methods:{onResolve:function(t){var e=t.isValid,s=t.data;this.formValid=e,this.$store.dispatch("bb_load_base_relations",parseInt(s.skeleton_id)),void 0===this.bb_base_by_id.id?this.$store.dispatch("bb_create_base",s):this.$store.dispatch("bb_update_base",{id:this.bb_base_by_id.id,data:s})},onReject:function(t){var e=t.isValid;this.formValid=e},flip_side:function(){this.suitable_attachment=[],"front"===this.side?this.side="back":"back"===this.side?this.side="front":console.error("Has error in side")},select_category:function(t){var e=this,s=this.bb_base_relations.skeletons_points.filter((function(s){return s.class.includes(t.id)&&s.side===e.side&&"Plus"===s.type})),a=this.bb_base_relations.list_parts_points.filter((function(s){return s.class.includes(t.id)&&s.side===e.side&&"Plus"===s.type}));if(s.length>0&&0===a.length){for(var i=[],n=function(s){parseInt(e.bb_base_relations.list_skeleton_point_id_and_their_classes_ids[s].class_id)===parseInt(t.id)&&e.bb_base_relations.skeletons_points.filter((function(t){return parseInt(t.id)===parseInt(e.bb_base_relations.list_skeleton_point_id_and_their_classes_ids[s].point_id)}))[0].side===e.side&&i.push(e.bb_base_relations.list_skeleton_point_id_and_their_classes_ids[s])},r=0;r<this.bb_base_relations.list_skeleton_point_id_and_their_classes_ids.length;r++)n(r);if(0===i.length)return;for(var _=[],l=0;l<this.bb_base_relations.list_parts_points.length;l++)if(this.bb_base_relations.list_parts_points[l].class.includes(t.id)&&"Minus"===this.bb_base_relations.list_parts_points[l].type&&this.bb_base_relations.list_parts_points[l].side===this.side)for(var o=0;o<this.bb_base_relations.all_parts_data.length;o++)parseInt(this.bb_base_relations.all_parts_data[o].id)===parseInt(this.bb_base_relations.list_parts_points[l].part_id)&&_.push({part_id:parseInt(this.bb_base_relations.all_parts_data[o].id),part_point_id:parseInt(this.bb_base_relations.list_parts_points[l].id),skeleton_suitable_points:i});this.suitable_attachment=_}else if(0===s.length&&a.length>0){for(var p=[],d=function(s){parseInt(e.bb_base_relations.list_parent_part_point_id_and_their_classes_ids[s].class_id)===parseInt(t.id)&&e.bb_base_relations.list_parts_points.filter((function(t){return parseInt(t.id)===parseInt(e.bb_base_relations.list_parent_part_point_id_and_their_classes_ids[s].point_id)}))[0].side===e.side&&p.push(e.bb_base_relations.list_parent_part_point_id_and_their_classes_ids[s])},c=0;c<this.bb_base_relations.list_parent_part_point_id_and_their_classes_ids.length;c++)d(c);if(0===p.length)return;for(var u=[],b=0;b<this.bb_base_relations.list_parts_points.length;b++)if(this.bb_base_relations.list_parts_points[b].class.includes(t.id)&&"Minus"===this.bb_base_relations.list_parts_points[b].type&&this.bb_base_relations.list_parts_points[b].side===this.side)for(var h=0;h<this.bb_base_relations.all_parts_data.length;h++)parseInt(this.bb_base_relations.all_parts_data[h].id)===parseInt(this.bb_base_relations.list_parts_points[b].part_id)&&u.push({part_id:parseInt(this.bb_base_relations.all_parts_data[h].id),part_point_id:parseInt(this.bb_base_relations.list_parts_points[b].id),parent_part_suitable_points:p});this.suitable_attachment=u}else{for(var f=[],v=function(s){parseInt(e.bb_base_relations.list_skeleton_point_id_and_their_classes_ids[s].class_id)===parseInt(t.id)&&e.bb_base_relations.skeletons_points.filter((function(t){return parseInt(t.id)===parseInt(e.bb_base_relations.list_skeleton_point_id_and_their_classes_ids[s].point_id)}))[0].side===e.side&&f.push(e.bb_base_relations.list_skeleton_point_id_and_their_classes_ids[s])},k=0;k<this.bb_base_relations.list_skeleton_point_id_and_their_classes_ids.length;k++)v(k);if(0===f.length)return;for(var I=[],m=function(s){parseInt(e.bb_base_relations.list_parent_part_point_id_and_their_classes_ids[s].class_id)===parseInt(t.id)&&e.bb_base_relations.list_parts_points.filter((function(t){return parseInt(t.id)===parseInt(e.bb_base_relations.list_parent_part_point_id_and_their_classes_ids[s].point_id)}))[0].side===e.side&&I.push(e.bb_base_relations.list_parent_part_point_id_and_their_classes_ids[s])},g=0;g<this.bb_base_relations.list_parent_part_point_id_and_their_classes_ids.length;g++)m(g);if(0===I.length)return;for(var y=[],$=0;$<this.bb_base_relations.list_parts_points.length;$++)if(this.bb_base_relations.list_parts_points[$].class.includes(t.id)&&"Minus"===this.bb_base_relations.list_parts_points[$].type&&this.bb_base_relations.list_parts_points[$].side===this.side)for(var x=0;x<this.bb_base_relations.all_parts_data.length;x++)parseInt(this.bb_base_relations.all_parts_data[x].id)===parseInt(this.bb_base_relations.list_parts_points[$].part_id)&&y.push({part_id:parseInt(this.bb_base_relations.all_parts_data[x].id),part_point_id:parseInt(this.bb_base_relations.list_parts_points[$].id),parent_part_suitable_points:I,skeleton_suitable_points:f});this.suitable_attachment=y}},get_part_name_img:function(t){if(t.skeleton_suitable_points){var e={name:this.bb_base_relations.all_parts_data.filter((function(e){return parseInt(e.id)===parseInt(t.part_id)}))[0].name,img:this.bb_base_relations.all_parts_data.filter((function(e){return parseInt(e.id)===parseInt(t.part_id)}))[0].image_front,part_id:parseInt(t.part_id),part_point_id:parseInt(t.part_point_id),skeleton_suitable_points:t.skeleton_suitable_points};return e}if(t.parent_part_suitable_points){var s={name:this.bb_base_relations.all_parts_data.filter((function(e){return parseInt(e.id)===parseInt(t.part_id)}))[0].name,img:this.bb_base_relations.all_parts_data.filter((function(e){return parseInt(e.id)===parseInt(t.part_id)}))[0].image_front,part_id:parseInt(t.part_id),part_point_id:parseInt(t.part_point_id),part_suitable_points:t.part_suitable_points};return s}},validation_selected_item:function(t){var e=this;if(this.intermediate_attach_data=null,t.skeleton_suitable_points&&!t.parent_part_suitable_points)if(t.skeleton_suitable_points.length<=1)this.push_to_selected_list({part_id:parseInt(t.part_id),part_point_id:parseInt(t.part_point_id),skeleton_point_id:parseInt(t.skeleton_suitable_points[0].point_id)});else{this.select_skeleton_point_dialog=!0,this.list_for_select_skeleton_point=[],this.selected_point_data={part_id:parseInt(t.part_id),part_point_id:parseInt(t.part_point_id)};for(var s=function(s){e.list_for_select_skeleton_point.push({skeleton_point_id:t.skeleton_suitable_points[s].point_id,skeleton_point_name:e.bb_base_relations.skeletons_points.filter((function(e){return e.id===t.skeleton_suitable_points[s].point_id}))[0].name})},a=0;a<t.skeleton_suitable_points.length;a++)s(a)}else if(t.parent_part_suitable_points&&!t.skeleton_suitable_points)if(t.parent_part_suitable_points.length<=1)this.install_parent_attach(parseInt(t.parent_part_suitable_points[0].point_id)),this.push_to_selected_list({part_id:parseInt(t.part_id),part_point_id:parseInt(t.part_point_id),parent_part_point_id:parseInt(t.parent_part_suitable_points[0].point_id)});else{this.select_parent_part_point_dialog=!0,this.list_for_select_skeleton_point=[],this.selected_point_data={part_id:parseInt(t.part_id),part_point_id:parseInt(t.part_point_id)};for(var i=function(s){e.list_for_select_skeleton_point.push({parent_part_point_id:t.parent_part_suitable_points[s].point_id,parent_part_point_name:e.bb_base_relations.list_parts_points.filter((function(e){return e.id===t.parent_part_suitable_points[s].point_id}))[0].name})},n=0;n<t.parent_part_suitable_points.length;n++)i(n)}else t.parent_part_suitable_points&&t.skeleton_suitable_points?(this.select_parent_part_or_skeleton=!0,this.intermediate_attach_data=t):console.error("Error validation!!!")},push_to_selected_list:function(t){for(var e=0;e<this.list_selected_attach[this.side].length;e++)t.skeleton_point_id&&this.list_selected_attach[this.side][e].skeleton_point_id===t.skeleton_point_id&&this.delete_of_the_selected_list(this.list_selected_attach[this.side][e]);this.list_selected_attach[this.side].push(t),this.install_related_attachment()},delete_of_the_selected_list:function(t){var e=this;if(this.install_related_attachment(),"front"===this.side){if(this.bb_base_relations.list_parts_points.filter((function(s){return parseInt(s.part_id)===parseInt(e.bb_base_relations.list_parts_points.filter((function(e){return parseInt(e.id)===parseInt(t.part_point_id)}))[0].part_id)&&"Plus"===s.type})).length>0)for(var s=this.bb_base_relations.list_parts_points.filter((function(s){return parseInt(s.part_id)===parseInt(e.bb_base_relations.list_parts_points.filter((function(e){return parseInt(e.id)===parseInt(t.part_point_id)}))[0].part_id)&&"Plus"===s.type&&"front"===s.side}))[0].id,a=function(t){if(parseInt(e.list_selected_attach["front"][t].parent_part_point_id)===parseInt(s)){for(var a=0;a<e.list_selected_attach["back"].length;a++)parseInt(e.list_selected_attach["back"][a].part_point_id)===parseInt(e.bb_base_relations.list_parts_points.filter((function(s){return parseInt(s.related_id)===parseInt(e.list_selected_attach["front"][t].part_point_id)}))[0].id)&&e.list_selected_attach["back"].splice(a,1);e.list_selected_attach["front"].splice(t,1)}},i=0;i<this.list_selected_attach["front"].length;i++)a(i);for(var n=function(s){if(parseInt(e.list_selected_attach["front"][s].part_id)===parseInt(t.part_id)&&parseInt(e.list_selected_attach["front"][s].part_point_id)===parseInt(t.part_point_id)){for(var a=0;a<e.list_selected_attach["back"].length;a++)parseInt(e.list_selected_attach["back"][a].part_point_id)===parseInt(e.bb_base_relations.list_parts_points.filter((function(t){return parseInt(t.related_id)===parseInt(e.list_selected_attach["front"][s].part_point_id)}))[0].id)&&e.list_selected_attach["back"].splice(a,1);e.list_selected_attach["front"].splice(s,1)}},r=0;r<this.list_selected_attach["front"].length;r++)n(r)}else if("back"===this.side){if(this.bb_base_relations.list_parts_points.filter((function(s){return parseInt(s.part_id)===parseInt(e.bb_base_relations.list_parts_points.filter((function(e){return parseInt(e.id)===parseInt(t.part_point_id)}))[0].part_id)&&"Plus"===s.type})).length>0)for(var _=this.bb_base_relations.list_parts_points.filter((function(s){return parseInt(s.part_id)===parseInt(e.bb_base_relations.list_parts_points.filter((function(e){return parseInt(e.id)===parseInt(t.part_point_id)}))[0].part_id)&&"Plus"===s.type&&"back"===s.side}))[0].id,l=function(t){if(parseInt(e.list_selected_attach["back"][t].parent_part_point_id)===parseInt(_)){for(var s=0;s<e.list_selected_attach["front"].length;s++)parseInt(e.list_selected_attach["front"][s].part_point_id)===parseInt(e.bb_base_relations.list_parts_points.filter((function(s){return parseInt(s.id)===parseInt(e.list_selected_attach["back"][t].part_point_id)}))[0].related_id)&&e.list_selected_attach["front"].splice(s,1);e.list_selected_attach["back"].splice(t,1)}},o=0;o<this.list_selected_attach["back"].length;o++)l(o);for(var p=function(s){if(parseInt(e.list_selected_attach["back"][s].part_id)===parseInt(t.part_id)&&parseInt(e.list_selected_attach["back"][s].part_point_id)===parseInt(t.part_point_id)){for(var a=0;a<e.list_selected_attach["front"].length;a++)parseInt(e.list_selected_attach["front"][a].part_point_id)===parseInt(e.bb_base_relations.list_parts_points.filter((function(t){return parseInt(t.id)===parseInt(e.list_selected_attach["back"][s].part_point_id)}))[0].related_id)&&e.list_selected_attach["front"].splice(a,1);e.list_selected_attach["back"].splice(s,1)}},d=0;d<this.list_selected_attach["back"].length;d++)p(d)}},detect_selected_attach:function(t){for(var e=!1,s=0;s<this.list_selected_attach[this.side].length;s++)this.list_selected_attach[this.side][s].part_id===t.part_id&&this.list_selected_attach[this.side][s].part_point_id===t.part_point_id&&(e=!0);return e},form_valid_skeleton:function(){this.$v.$touch(),this.$v.selected_point.$invalid||(this.select_skeleton_point_dialog=!this.select_skeleton_point_dialog,this.selected_point_data["skeleton_point_id"]=this.selected_point,this.push_to_selected_list(this.selected_point_data),this.selected_point=null,this.selected_point_data=null)},form_valid_parent_part:function(){this.$v.$touch(),this.$v.selected_point.$invalid||(this.select_parent_part_point_dialog=!this.select_parent_part_point_dialog,this.selected_point_data["parent_part_point_id"]=this.selected_point,this.install_parent_attach(this.selected_point_data.parent_part_point_id),this.push_to_selected_list(this.selected_point_data),this.selected_point=null,this.selected_point_data=null)},form_valid_part_or_skeleton:function(){if(this.$v.$touch(),!this.$v.part_or_skeleton.$invalid){if(this.select_parent_part_or_skeleton=!this.select_parent_part_or_skeleton,"skeleton"===this.part_or_skeleton){var t={part_id:parseInt(this.intermediate_attach_data.part_id),part_point_id:parseInt(this.intermediate_attach_data.part_point_id),skeleton_suitable_points:this.intermediate_attach_data.skeleton_suitable_points};this.validation_selected_item(t)}else if("part"===this.part_or_skeleton){var e={part_id:parseInt(this.intermediate_attach_data.part_id),part_point_id:parseInt(this.intermediate_attach_data.part_point_id),parent_part_suitable_points:this.intermediate_attach_data.parent_part_suitable_points};this.validation_selected_item(e)}else console.error("Error choosing between skeleton and part");this.part_or_skeleton=null,this.intermediate_attach_data=null}},cancel_form_skeleton:function(){this.select_skeleton_point_dialog=!1,this.list_for_select_skeleton_point=[],this.selected_point=null,this.selected_point_data=null},cancel_form_parent_part:function(){this.select_parent_part_point_dialog=!1,this.list_for_select_skeleton_point=[],this.selected_point=null,this.selected_point_data=null},cancel_form_part_or_skeleton:function(){this.select_parent_part_or_skeleton=!1,this.part_or_skeleton=null},install_parent_attach:function(t){for(var e=this,s=this.bb_base_relations.list_parts_points.filter((function(s){return parseInt(s.part_id)===parseInt(e.bb_base_relations.list_parts_points.filter((function(e){return parseInt(e.id)===parseInt(t)}))[0].part_id)})).filter((function(t){return"Minus"===t.type&&t.side===e.side}))[0].id,a=this.bb_base_relations.list_parts_points.filter((function(t){return parseInt(t.id)===parseInt(s)}))[0].class,i=[],n=function(t){for(var s=0;s<a.length;s++)e.bb_base_relations.skeletons_points.filter((function(s){return parseInt(s.id)===parseInt(e.bb_base_relations.list_skeleton_point_id_and_their_classes_ids[t].point_id)}))[0].side===e.side&&parseInt(e.bb_base_relations.list_skeleton_point_id_and_their_classes_ids[t].class_id)===parseInt(a[s])&&i.push(e.bb_base_relations.list_skeleton_point_id_and_their_classes_ids[t])},r=0;r<this.bb_base_relations.list_skeleton_point_id_and_their_classes_ids.length;r++)n(r);var _={part_point_id:s,part_id:this.bb_base_relations.list_parts_points.filter((function(t){return parseInt(t.id)===parseInt(s)}))[0].part_id,skeleton_suitable_points:i};this.validation_selected_item(_)},install_related_attachment:function(){var t=this;if("front"===this.side)for(var e=function(e){if(t.list_selected_attach.front[e].skeleton_point_id){var s=t.bb_base_relations.list_parts_points.filter((function(s){return parseInt(s.related_id)===parseInt(t.list_selected_attach.front[e].part_point_id)}))[0],a=t.bb_base_relations.skeletons_points.filter((function(s){return parseInt(s.related_id)===parseInt(t.list_selected_attach.front[e].skeleton_point_id)}))[0],i={part_id:parseInt(s.part_id),part_point_id:parseInt(s.id),skeleton_point_id:parseInt(a.id)};if(0===t.list_selected_attach.back.length)t.list_selected_attach.back.push(i);else{if(t.list_selected_attach.back.map((function(t){return parseInt(t.part_id)===parseInt(i.part_id)&&parseInt(t.part_point_id)===parseInt(i.part_point_id)&&parseInt(t.skeleton_point_id)===parseInt(i.skeleton_point_id)})).includes(!0))return"continue";t.list_selected_attach.back.push(i)}}else if(t.list_selected_attach.front[e].parent_part_point_id){var n=t.bb_base_relations.list_parts_points.filter((function(s){return parseInt(s.related_id)===parseInt(t.list_selected_attach.front[e].part_point_id)}))[0],r=t.bb_base_relations.list_parts_points.filter((function(s){return parseInt(s.related_id)===parseInt(t.list_selected_attach.front[e].parent_part_point_id)}))[0],_={part_id:parseInt(n.part_id),part_point_id:parseInt(n.id),parent_part_point_id:parseInt(r.id)};if(0===t.list_selected_attach.back.length)t.list_selected_attach.back.push(_);else{if(t.list_selected_attach.back.map((function(t){return parseInt(t.part_id)===parseInt(_.part_id)&&parseInt(t.part_point_id)===parseInt(_.part_point_id)&&parseInt(t.parent_part_point_id)===parseInt(_.parent_part_point_id)})).includes(!0))return"continue";t.list_selected_attach.back.push(_)}}},s=0;s<this.list_selected_attach.front.length;s++)e(s);else if("back"===this.side)for(var a=function(e){if(t.list_selected_attach.back[e].skeleton_point_id){var s=t.bb_base_relations.list_parts_points.filter((function(s){return parseInt(s.id)===parseInt(t.list_selected_attach.back[e].part_point_id)}))[0],a=t.bb_base_relations.skeletons_points.filter((function(s){return parseInt(s.id)===parseInt(t.list_selected_attach.back[e].skeleton_point_id)}))[0],i={part_id:parseInt(s.part_id),part_point_id:parseInt(s.related_id),skeleton_point_id:parseInt(a.related_id)};if(0===t.list_selected_attach.front.length)t.list_selected_attach.front.push(i);else{if(t.list_selected_attach.front.map((function(t){return parseInt(t.part_id)===parseInt(i.part_id)&&parseInt(t.part_point_id)===parseInt(i.part_point_id)&&parseInt(t.skeleton_point_id)===parseInt(i.skeleton_point_id)})).includes(!0))return"continue";t.list_selected_attach.front.push(i)}}else if(t.list_selected_attach.back[e].parent_part_point_id){var n=t.bb_base_relations.list_parts_points.filter((function(s){return parseInt(s.id)===parseInt(t.list_selected_attach.back[e].part_point_id)}))[0],r=t.bb_base_relations.list_parts_points.filter((function(s){return parseInt(s.id)===parseInt(t.list_selected_attach.back[e].parent_part_point_id)}))[0],_={part_id:parseInt(n.part_id),part_point_id:parseInt(n.related_id),parent_part_point_id:parseInt(r.related_id)};if(0===t.list_selected_attach.front.length)t.list_selected_attach.front.push(_);else{if(t.list_selected_attach.front.map((function(t){return parseInt(t.part_id)===parseInt(_.part_id)&&parseInt(t.part_point_id)===parseInt(_.part_point_id)&&parseInt(t.parent_part_point_id)===parseInt(_.parent_part_point_id)})).includes(!0))return"continue";t.list_selected_attach.front.push(_)}}},i=0;i<this.list_selected_attach.back.length;i++)a(i)},save_base_builder_data:function(){for(var t=[],e=0;e<this.list_selected_attach["front"].length;e++)t.push(Object(n["a"])({base_id:parseInt(this.bb_base_by_id.id)},this.list_selected_attach["front"][e]));for(var s=0;s<this.list_selected_attach["back"].length;s++)t.push(Object(n["a"])({base_id:parseInt(this.bb_base_by_id.id)},this.list_selected_attach["back"][s]));this.$store.dispatch("bb_save_base_builder_attach",t)}},computed:{bb_base_relations:function(){return this.$store.getters.bb_base_relations},selected_point_error:function(){var t=[];return this.$v.selected_point.$dirty?(!this.$v.selected_point.required&&t.push("Point is required."),t):t},part_or_skeleton_error:function(){var t=[];return this.$v.part_or_skeleton.$dirty?(!this.$v.part_or_skeleton.required&&t.push("Required."),t):t},bb_load_base_relations_status:function(){return this.$store.getters.bb_load_base_relations_status},merge_classes:function(){var t=!1;return this.bb_base_relations.list_data_of_used_classes_for_skeleton&&this.bb_base_relations.list_data_of_used_classes_for_part&&(t=Array.from(new Set(this.bb_base_relations.list_data_of_used_classes_for_skeleton.concat(this.bb_base_relations.list_data_of_used_classes_for_part)))),t},bb_base_by_id:function(){return this.$store.getters.bb_base_by_id}}},p=o,d=s("2877"),c=s("6544"),u=s.n(c),b=s("8336"),h=s("b0af"),f=s("99d9"),v=s("62ad"),k=s("a75b"),I=s("169a"),m=s("ce7e"),g=s("132d"),y=s("0fd9"),$=s("b974"),x=Object(d["a"])(p,a,i,!1,null,null,null);e["default"]=x.exports;u()(x,{VBtn:b["a"],VCard:h["a"],VCardText:f["b"],VCardTitle:f["c"],VCol:v["a"],VContent:k["a"],VDialog:I["a"],VDivider:m["a"],VIcon:g["a"],VRow:y["a"],VSelect:$["a"]})},"24ee":function(t,e,s){"use strict";var a=s("93d2"),i=s.n(a);i.a},"8b39":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-content",[s("v-card",[s("div",{staticClass:"b-image-container"},[s("div",{staticClass:"b-image-container__inner"},[s("div",{staticClass:"b-image-container__content",style:{width:t.canvas_width,minWidth:t.canvas_width,maxWidth:t.canvas_width}},[s("img",{attrs:{src:"front"===t.side?t.skeleton_data.image_front:"back"===t.side?t.skeleton_data.image_back:"error",width:t.canvas_width+"px"}}),t._l(t.list_product[t.side],(function(e,a){return s("img",{key:"image"+a,staticClass:"b-image-container__image",style:{top:e.pos.y,left:e.pos.x,width:e.width,zIndex:e.z_index},attrs:{src:e.image[t.side],title:e.hint}})}))],2)])])])],1)},i=[],n=(s("4de4"),s("3ca3"),s("ddb0"),s("96cf"),s("1da1")),r={props:["skeleton_data","attachments","config","side"],watch:{attachments:{immediate:!0,handler:function(){this.get_part_data()},deep:!0}},data:function(){return{canvas_width:500,radio:{front:null,back:null},list_product:{front:[],back:[]}}},created:function(){var t=this;this.get_radio(this.skeleton_data.image_front,"front"),this.get_radio(this.skeleton_data.image_back,"back");var e=setInterval((function(){t.get_part_data(),(t.attachments["front"].length>0||t.attachments["back"].length>0)&&clearInterval(e)}),100)},methods:{get_radio:function(t,e){var s=this,a=null,i=new Image;return i.onload=function(t){"front"===e?s.radio.front=s.canvas_width/t.target.width:"back"===e&&(s.radio.back=s.canvas_width/t.target.width)},i.src=t,a},get_part_data:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.list_product[t.side]=[],s=regeneratorRuntime.mark((function e(s){var a,i,n,r,_,l,o,p,d,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.attachments[t.side][s],i={x:t.config.list_parts_points.filter((function(t){return parseInt(t.id)===parseInt(a.part_point_id)}))[0].pos_x,y:t.config.list_parts_points.filter((function(t){return parseInt(t.id)===parseInt(a.part_point_id)}))[0].pos_y},e.t0={x:null,y:null},e.t1={front:t.config.all_parts_data.filter((function(t){return parseInt(t.id)===parseInt(a.part_id)}))[0].image_front,back:t.config.all_parts_data.filter((function(t){return parseInt(t.id)===parseInt(a.part_id)}))[0].image_back},e.next=6,t.get_image_width(t.config.all_parts_data.filter((function(t){return parseInt(t.id)===parseInt(a.part_id)}))[0].image_front);case 6:e.t2=e.sent,e.t3=e.t2+"px",e.t4=t.config.list_parts_points.filter((function(t){return parseInt(t.id)===parseInt(a.part_point_id)}))[0].hint,n={pos:e.t0,image:e.t1,width:e.t3,hint:e.t4,z_index:null},a.skeleton_point_id?(r={x:t.config.skeletons_points.filter((function(t){return parseInt(t.id)===parseInt(a.skeleton_point_id)}))[0].pos_x,y:t.config.skeletons_points.filter((function(t){return parseInt(t.id)===parseInt(a.skeleton_point_id)}))[0].pos_y},n.pos.x=(parseInt(r.x)-parseInt(i.x))*t.radio[t.side]+"px",n.pos.y=(parseInt(r.y)-parseInt(i.y))*t.radio[t.side]+"px",n.z_index=0):a.parent_part_point_id&&(_=parseInt(a.parent_part_point_id),l=t.config.list_parts_points.filter((function(t){return parseInt(t.id)===_}))[0],o=parseInt(t.config.list_parts_points.filter((function(t){return parseInt(t.id)===_}))[0].part_id),p=t.config.list_parts_points.filter((function(e){return parseInt(e.part_id)===o&&"Minus"===e.type&&e.side===t.side}))[0],d=t.attachments[t.side].filter((function(t){return parseInt(t.part_point_id)===parseInt(p.id)}))[0],c={x:t.config.skeletons_points.filter((function(t){return parseInt(t.id)===parseInt(d.skeleton_point_id)}))[0].pos_x,y:t.config.skeletons_points.filter((function(t){return parseInt(t.id)===parseInt(d.skeleton_point_id)}))[0].pos_y},n.pos.x=(parseInt(c.x)+parseInt(l.pos_x)-parseInt(p.pos_x)-parseInt(i.x))*t.radio[t.side]+"px",n.pos.y=(parseInt(c.y)+parseInt(l.pos_y)-parseInt(p.pos_y)-parseInt(i.y))*t.radio[t.side]+"px",n.z_index=1),t.list_product[t.side].push(n);case 12:case"end":return e.stop()}}),e)})),a=0;case 3:if(!(a<t.attachments[t.side].length)){e.next=8;break}return e.delegateYield(s(a),"t0",5);case 5:a++,e.next=3;break;case 8:case"end":return e.stop()}}),e)})))()},get_image_width:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function s(){var a,i;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return a=new Image,i=function(){return a.width*e.radio[e.side]},s.next=4,i();case 4:return a.onload=s.sent,a.src=t,s.abrupt("return",i());case 7:case"end":return s.stop()}}),s)})))()}},computed:{}},_=r,l=(s("24ee"),s("2877")),o=s("6544"),p=s.n(o),d=s("b0af"),c=s("a75b"),u=Object(l["a"])(_,a,i,!1,null,null,null);e["a"]=u.exports;p()(u,{VCard:d["a"],VContent:c["a"]})},"93d2":function(t,e,s){},fcf4:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-content",[s("v-row",{attrs:{align:"end"}},[s("v-col",[s("label",[s("strong",[t._v("Choose skelet and set name")])]),s("v-text-field",{attrs:{"error-messages":t.nameErrors,required:"",label:"Enter base name: *"},on:{input:function(e){return t.$v.name.$touch()},blur:function(e){return t.$v.name.$touch()}},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),s("v-select",{attrs:{items:t.skeletons,"error-messages":t.selectedSkeletErrors,"item-value":"id","item-text":"name",required:"",disabled:t.update,label:"Select skeleton *"},on:{input:function(e){return t.$v.selectedSkelet.$touch()},blur:function(e){return t.$v.selectedSkelet.$touch()}},model:{value:t.selectedSkelet,callback:function(e){t.selectedSkelet=e},expression:"selectedSkelet"}}),s("v-select",{attrs:{items:t.categorys,"error-messages":t.selectedCategoryErrors,"item-value":"id","item-text":"name",required:"",label:"Select category *"},on:{input:function(e){return t.$v.selectedCategory.$touch()},blur:function(e){return t.$v.selectedCategory.$touch()}},model:{value:t.selectedCategory,callback:function(e){t.selectedCategory=e},expression:"selectedCategory"}})],1),s("v-col",{attrs:{cols:"6"}},[s("v-textarea",{attrs:{label:"Enter base description"},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}})],1)],1),s("v-row",[s("v-col",{attrs:{cols:"6"}}),s("v-col",{attrs:{cols:"6"}},[s("v-btn",{attrs:{color:"primary",block:""},on:{click:t.save}},[t._v("Save")])],1)],1)],1)},i=[],n=(s("a4d3"),s("e01a"),s("b0c0"),s("1dce")),r=s("b5ae"),_={props:["baseData","update","bb_base_relations"],mixins:[n["validationMixin"]],validations:{name:{required:r["required"]},selectedSkelet:{required:r["required"]},selectedCategory:{required:r["required"]}},data:function(){return{name:this.baseData?this.baseData.name:null,selectedSkelet:this.baseData?this.baseData.skeleton_id:null,selectedCategory:this.baseData?this.baseData.category:null,description:this.baseData?this.baseData.description:null}},created:function(){this.$store.dispatch("load_all_categoryes"),this.$store.dispatch("sb_load_all_skeletons")},mounted:function(){},methods:{save:function(){if(this.$v.$touch(),this.$v.$invalid)this.$emit("reject",{isValid:!this.$v.$invalid});else{var t={name:this.name,skeleton_id:this.selectedSkelet,category:this.selectedCategory,description:this.description};this.$emit("resolve",{isValid:!this.$v.$invalid,data:t})}}},computed:{skeletons:function(){var t=[];return this.$store.getters.sb_all_skeletons_data.data&&(t=this.$store.getters.sb_all_skeletons_data.data),t},categorys:function(){return this.$store.getters.all_categoryes},nameErrors:function(){var t=[];return this.$v.name.$dirty?(!this.$v.name.required&&t.push("Name is required."),t):t},selectedSkeletErrors:function(){var t=[];return this.$v.selectedSkelet.$dirty?(!this.$v.selectedSkelet.required&&t.push("Skelet is required."),t):t},selectedCategoryErrors:function(){var t=[];return this.$v.selectedCategory.$dirty?(!this.$v.selectedCategory.required&&t.push("Category is required."),t):t}}},l=_,o=s("2877"),p=s("6544"),d=s.n(p),c=s("8336"),u=s("62ad"),b=s("a75b"),h=s("0fd9"),f=s("b974"),v=s("8654"),k=s("a844"),I=Object(o["a"])(l,a,i,!1,null,null,null);e["a"]=I.exports;d()(I,{VBtn:c["a"],VCol:u["a"],VContent:b["a"],VRow:h["a"],VSelect:f["a"],VTextField:v["a"],VTextarea:k["a"]})}}]);
//# sourceMappingURL=chunk-10e0569d.8fd26cdf.js.map