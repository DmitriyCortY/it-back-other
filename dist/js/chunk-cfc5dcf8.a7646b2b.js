(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cfc5dcf8"],{"1f4f":function(t,a,e){"use strict";e("a9e3");var i=e("5530"),o=(e("8b37"),e("80d2")),s=e("7560"),_=e("58df");a["a"]=Object(_["a"])(s["a"]).extend({name:"v-simple-table",props:{dense:Boolean,fixedHeader:Boolean,height:[Number,String]},computed:{classes:function(){return Object(i["a"])({"v-data-table--dense":this.dense,"v-data-table--fixed-height":!!this.height&&!this.fixedHeader,"v-data-table--fixed-header":this.fixedHeader},this.themeClasses)}},methods:{genWrapper:function(){return this.$slots.wrapper||this.$createElement("div",{staticClass:"v-data-table__wrapper",style:{height:Object(o["f"])(this.height)}},[this.$createElement("table",this.$slots.default)])}},render:function(t){return t("div",{staticClass:"v-data-table",class:this.classes},[this.$slots.top,this.genWrapper(),this.$slots.bottom])}})},"8b37":function(t,a,e){},c4fa:function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-content",[Object.keys(t.akb_load_kit_by_id).length>0?e("ChooseSkelet",{attrs:{update:!0,baseData:t.akb_load_kit_by_id},on:{resolve:t.onResolve,reject:t.onReject}}):t._e(),t.akb_load_kit_relation_all_loaded&&t.formValid&&t.akb_load_kit_products_loaded?e("ChooseProduct",{attrs:{side:t.side,akb_load_kit_relation:t.akb_load_kit_relation,selected_products:t.selected_products},on:{data_transfer:t.on_data_transfer}}):t._e(),e("v-divider"),t.akb_load_kit_relation_all_loaded&&t.formValid&&t.akb_load_kit_products_loaded?e("v-row",[e("v-col",{attrs:{cols:"6"}},[e("v-btn",{staticStyle:{color:"#fff"},attrs:{color:"blue",block:""},on:{click:t.flip_side}},[t._v("Flip side")])],1),e("v-col",{attrs:{cols:"6"}},[e("v-btn",{staticStyle:{color:"#fff"},attrs:{color:"primary",block:""},on:{click:t.save_data}},[t._v("Save data")])],1)],1):t._e(),t.akb_load_kit_relation_all_loaded&&t.formValid&&t.akb_load_kit_products_loaded?e("v-row",[e("v-col",{attrs:{cols:"12"}},[e("v-simple-table",[e("tbody",[e("tr",[e("td",{staticStyle:{"font-size":"18px"},attrs:{align:"left"}},[e("strong",[t._v("Total price: ")]),e("span",[t._v(" "+t._s(t.total_price+"$")+" ")])]),e("td",{staticStyle:{"font-size":"18px"},attrs:{align:"left"}},[e("strong",[t._v("Total weight: ")]),e("span",[t._v(" "+t._s(t.total_weight+"g")+" ")])])])])])],1)],1):t._e()],1)},o=[],s=(e("4de4"),e("4160"),e("a630"),e("caad"),e("d3b7"),e("6062"),e("2532"),e("3ca3"),e("159b"),e("ddb0"),e("5530")),_=e("68d6"),d=e("e225"),r={components:{ChooseSkelet:_["a"],ChooseProduct:d["a"]},data:function(){return{formValid:!0,list_selected_attach:{front:[],back:[]},side:"front"}},destroyed:function(){this.$store.dispatch("akb_drop_all_data")},created:function(){var t=this;this.$store.dispatch("akb_load_kit_by_id",parseInt(this.$route.params.id));var a=setInterval((function(){t.akb_load_kit_by_id.id&&(t.$store.dispatch("akb_load_kit_products",parseInt(t.akb_load_kit_by_id.id)),clearInterval(a))}),100),e=setInterval((function(){t.akb_load_kit_by_id.skeleton_id&&(t.$store.dispatch("akb_load_kit_relation",parseInt(t.akb_load_kit_by_id.skeleton_id)),clearInterval(e))}),100)},methods:{onResolve:function(t){var a=t.isValid,e=t.data;this.formValid=a,void 0===this.akb_create_kit.id?this.$store.dispatch("akb_create_kit",e):this.$store.dispatch("akb_update_kit",Object(s["a"])({id:this.akb_create_kit.id},e))},onReject:function(t){var a=t.isValid;this.formValid=a},flip_side:function(){"front"===this.side?this.side="back":"back"===this.side?this.side="front":console.error("Has error in side")},on_data_transfer:function(t){this.$set(this.list_selected_attach,"front",t.front),this.$set(this.list_selected_attach,"back",t.back)},save_data:function(){for(var t=[],a=0;a<this.list_selected_attach.front.length;a++)t.push({product_id:parseInt(this.list_selected_attach.front[a].product_id),product_point_id:parseInt(this.list_selected_attach.front[a].product_point_id),parent_skeleton_point_id:this.list_selected_attach.front[a].parent_skeleton_point_id?parseInt(this.list_selected_attach.front[a].parent_skeleton_point_id):void 0,parent_product_point_id:this.list_selected_attach.front[a].parent_product_point_id?parseInt(this.list_selected_attach.front[a].parent_product_point_id):void 0,kit_id:parseInt(this.$route.params.id)});for(var e=0;e<this.list_selected_attach.back.length;e++)t.push({product_id:parseInt(this.list_selected_attach.back[e].product_id),product_point_id:parseInt(this.list_selected_attach.back[e].product_point_id),parent_skeleton_point_id:this.list_selected_attach.back[e].parent_skeleton_point_id?parseInt(this.list_selected_attach.back[e].parent_skeleton_point_id):void 0,parent_product_point_id:this.list_selected_attach.back[e].parent_product_point_id?parseInt(this.list_selected_attach.back[e].parent_product_point_id):void 0,kit_id:parseInt(this.$route.params.id)});this.$store.dispatch("akb_save_kit_products",t)}},computed:{akb_create_kit:function(){return this.$store.getters.akb_create_kit},akb_load_kit_relation:function(){return this.$store.getters.akb_load_kit_relation},akb_load_kit_relation_all_loaded:function(){return this.$store.getters.akb_load_kit_relation_all_loaded},akb_load_kit_by_id:function(){return this.$store.getters.akb_load_kit_by_id},akb_load_kit_products:function(){return this.$store.getters.akb_load_kit_products},akb_load_kit_products_loaded:function(){return this.$store.getters.akb_load_kit_products_loaded},selected_products:function(){var t=this,a={front:[],back:[]};if(this.akb_load_kit_products_loaded&&this.akb_load_kit_relation_all_loaded)for(var e=function(e){"front"===t.akb_load_kit_relation.products_points_data.filter((function(a){return parseInt(a.id)===parseInt(t.akb_load_kit_products[e].product_point_id)}))[0].side?a.front.push(t.akb_load_kit_products[e]):"back"===t.akb_load_kit_relation.products_points_data.filter((function(a){return parseInt(a.id)===parseInt(t.akb_load_kit_products[e].product_point_id)}))[0].side&&a.back.push(t.akb_load_kit_products[e])},i=0;i<this.akb_load_kit_products.length;i++)e(i);return a},selected_products_ids:function(){var t=[];return this.akb_load_kit_relation_all_loaded&&(this.list_selected_attach.front.forEach((function(a){return t.push(parseInt(a.product_id))})),this.list_selected_attach.back.forEach((function(a){return t.push(parseInt(a.product_id))}))),Array.from(new Set(t))},total_price:function(){var t=this,a=0;return this.akb_load_kit_relation_all_loaded&&this.akb_load_kit_relation.products_data.forEach((function(e){t.selected_products_ids.includes(parseInt(e.id))&&(a+=parseInt(e.price))})),a},total_weight:function(){var t=this,a=parseInt(this.akb_load_kit_relation.skeleton_data.weight),e=a;return this.akb_load_kit_relation_all_loaded&&this.akb_load_kit_relation.products_data.forEach((function(a){t.selected_products_ids.includes(parseInt(a.id))&&(e+=parseInt(a.weight))})),e}}},n=r,l=e("2877"),c=e("6544"),p=e.n(c),k=e("8336"),h=e("62ad"),u=e("a75b"),b=e("ce7e"),f=e("0fd9"),v=e("1f4f"),g=Object(l["a"])(n,i,o,!1,null,null,null);a["default"]=g.exports;p()(g,{VBtn:k["a"],VCol:h["a"],VContent:u["a"],VDivider:b["a"],VRow:f["a"],VSimpleTable:v["a"]})}}]);
//# sourceMappingURL=chunk-cfc5dcf8.a7646b2b.js.map